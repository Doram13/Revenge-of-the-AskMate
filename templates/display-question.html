<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ question["title"] }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
<div class='container'>
    <h1> {{ question ["title"] }}</h1>
    <h3>Question Message:</h3>
    <h4>{{ question["message"] }} </h4>

    {% if question['image'] %}
        <h3><a target="_blank" href={{ question['image'] }}>Link to image</a></h3>
    {% endif %}

    <h5>Vote Number: </h5>
    <h5><a href="/question/{{ question["id"] }}/up">↥</a>{{ question["vote_number"] }} vote(s) <a
            href="/question/{{ question["id"] }}/down">↧</a></h5>
    {{ question("image") if image is defined }}


        <table class="table-bordered">
        {% if comments %}
        {% for title in comment_header %}
            <th class="text-center">{{ title }}</th>
        {% endfor %}

        {% for comment in comments %}
            <tr>
                <td align="center" style="width:5%">{{comment['id']}}</td>
                <td align="center" style="width:20%">{{comment['message']}}</td>
                <td align="center" style="width:10%">{{comment['submission_time']}}</td>
                <td align="center" style="width:5%">{{comment['edit_count']}}</td>
            </tr>
        {% endfor %}
        {% endif %}
            <tr align="center"><td colspan="4"><a href="{{ url_for("add_comment_to_question", question_id = question['id']) }}">Add new comment</a></td></tr>
        </table>


    {% if answers %}
        <h3>Answers:</h3>
        <table class="table-bordered">

            {% for head in header %}
                <th class="text-center">{{ head }}</th>
            {% endfor %}

            {% for answer in answers %}
                <tr>
                    <td style="width:5%" align="center">{{ answer["id"] }}</td>
                    <td style="width:5%" align="center">{{ answer["submission_time"] }}</td>
                    <td style="width:10%" align="center"><a
                            href="/question/{{ question['id'] }}/answer/{{ answer["id"] }}/up">↥</a>
                        {{ answer["vote_number"] }} <a href="/question/{{ question['id'] }}/answer/{{ answer["id"] }}/down">↧</a>
                    </td>
                    <td style="width:60%" align="center">{{ answer["message"] }}</td>
                    <td style="width:20%" align="center">
                        {% if answer['image'] %}
                            <a target="_blank" href={{ answer['image'] }}>Link to image</a>
                        {% endif %}
                    </td>
                    <td style="width:5%" align="center">
                        <form>
                            <button formaction="/{{ answer['question_id'] }}/answer/{{ answer["id"] }}/delete"> Delete</button>
                        </form>
                        <td align="center">
                    <form><button formaction="/edit/{{ answer["question_id"] }}/{{ answer["id"] }}"> Edit  </button></form>
                    </td>
                </tr>
            {% endfor %}
        </table>

    {% else %}
        <h5>There are no answer for this question yet.</h5>
    {% endif %}

    <h3><a href="{{ url_for("post_answer", question_id=question["id"]) }}"> Add New Answer</a><br>
        <a href="{{ url_for("edit_question", question_id=question["id"]) }}"> Update Question</a><br>
        <a href="/question/{{ question['id'] }}/delete"> Delete Question</a></h3>
    <h2><a href='/'> Go back to the homepage</a></h2></div>
</body>
</html>
